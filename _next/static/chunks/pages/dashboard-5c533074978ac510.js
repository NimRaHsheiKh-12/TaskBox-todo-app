(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(3014)}])},3014:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(5893),l=s(7294),r=s(8518),o=s(1163),i=e=>{let{children:t}=e,{loading:s,isAuthenticated:i}=(0,r.a)(),n=(0,o.useRouter)();return((0,l.useEffect)(()=>{s||i||n.push("/login")},[i,s,n]),s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})}):i?(0,a.jsx)(a.Fragment,{children:t}):null},n=e=>{let{onFilterChange:t}=e,[s,r]=(0,l.useState)("all"),[o,i]=(0,l.useState)("all"),[n,d]=(0,l.useState)(""),[c,u]=(0,l.useState)("all"),[m,p]=(0,l.useState)("");return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-pastel-gray",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-600 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",value:m,onChange:e=>p(e.target.value),placeholder:"Search by title...",className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-600 mb-1",children:"Status"}),(0,a.jsxs)("select",{id:"status",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-600 mb-1",children:"Priority"}),(0,a.jsxs)("select",{id:"priority",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"all",children:"All Priorities"}),(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-600 mb-1",children:"Category"}),(0,a.jsx)("input",{type:"text",id:"category",value:n,onChange:e=>d(e.target.value),placeholder:"Filter by category...",className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-600 mb-1",children:"Due Date"}),(0,a.jsxs)("select",{id:"dueDate",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"all",children:"All Dates"}),(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,a.jsx)("option",{value:"overdue",children:"Overdue"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex space-x-3 justify-end",children:[(0,a.jsx)("button",{onClick:()=>{r("all"),i("all"),d(""),u("all"),p(""),t({status:"all",priority:"all",category:"all",dueDate:"all",searchTerm:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-pastel-gray rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-gray transition-colors",children:"Reset Filters"}),(0,a.jsx)("button",{onClick:()=>{t({status:s,priority:o,category:""===n.trim()?"all":n,dueDate:c,searchTerm:m.trim()})},className:"px-4 py-2 text-sm font-medium text-white bg-pastel-blue rounded-lg hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-blue transition-colors",children:"Apply Filters"})]})]})};let d=s(7066).Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("access_token"),window.location.href="/login"),Promise.reject(e)});let c={getTodos:async function(e,t,s,a,l){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,i=new URLSearchParams;e&&i.append("search",e),void 0!==t&&i.append("status",t.toString()),s&&i.append("priority",s),a&&i.append("category",a),l&&i.append("due_date",l),i.append("limit",r.toString()),i.append("offset",o.toString());let n=await d.get("/todos?".concat(i.toString())),c=Array.isArray(n.data)?n.data:[];return{todos:c,total:c.length,limit:r,offset:o}},createTodo:async e=>(await d.post("/todos",e)).data,getTodoById:async e=>(await d.get("/todos/".concat(e))).data,updateTodo:async(e,t)=>(await d.put("/todos/".concat(e),t)).data,toggleTodoCompletion:async e=>(await d.patch("/todos/".concat(e,"/toggle"))).data,deleteTodo:async e=>{await d.delete("/todos/".concat(e))}};var u=e=>{let{todo:t,onToggle:s,onEdit:l,onDelete:r}=e,o=async()=>{try{let e=await c.toggleTodoCompletion(t.id);s(e)}catch(e){console.error("Error toggling todo:",e)}},i={Low:"text-green-600 bg-pastel-green",Medium:"text-yellow-600 bg-pastel-yellow",High:"text-red-600 bg-pastel-pink"}[t.priority];return(0,a.jsx)("div",{className:"p-5 rounded-xl border transition-all duration-200 hover:shadow-md ".concat(t.is_completed?"bg-pastel-green border-pastel-gray":"bg-white border-pastel-gray shadow-sm"),children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.is_completed,onChange:o,className:"mt-1 h-5 w-5 rounded border-pastel-gray text-pastel-blue focus:ring-pastel-blue focus:ring-offset-0"}),(0,a.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium truncate ".concat(t.is_completed?"line-through text-gray-500":"text-gray-800"),children:t.title}),(0,a.jsxs)("div",{className:"flex space-x-4 ml-2",children:[(0,a.jsx)("button",{onClick:()=>{l(t)},className:"text-sm font-medium text-pastel-blue hover:text-blue-500 transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>{r(t.id)},className:"text-sm font-medium text-pastel-pink hover:text-red-500 transition-colors",children:"Delete"})]})]}),t.description&&(0,a.jsx)("p",{className:"mt-2 text-sm ".concat(t.is_completed?"line-through text-gray-500":"text-gray-600"," break-words"),children:t.description}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(i),children:t.priority}),t.category&&(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-gray-600 bg-pastel-gray",children:t.category}),t.due_date&&(0,a.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-gray-600 bg-pastel-gray",children:["Due: ",new Date(t.due_date).toLocaleDateString()]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-gray-500 bg-pastel-gray",children:new Date(t.created_at).toLocaleDateString()})]})]})]})})},m=e=>{let{todo:t,onSubmit:s,onCancel:r}=e,o=!!t,[i,n]=(0,l.useState)({title:"",description:"",priority:"Medium",category:"",due_date:""}),[d,c]=(0,l.useState)({});(0,l.useEffect)(()=>{o&&t?n({title:t.title,description:t.description||"",priority:t.priority,category:t.category||"",due_date:t.due_date||""}):n({title:"",description:"",priority:"Medium",category:"",due_date:""})},[o,t]);let u=e=>{let{name:t,value:s}=e.target;n({...i,[t]:s}),d[t]&&c({...d,[t]:""})},m=()=>{let e={};return i.title.trim()||(e.title="Title is required"),i.due_date&&isNaN(Date.parse(i.due_date))&&(e.due_date="Invalid date format. Use YYYY-MM-DD"),c(e),0===Object.keys(e).length};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-md border border-pastel-gray",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:o?"Edit Todo":"Create New Todo"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),m()){if(o&&t){let e={};i.title!==t.title&&(e.title=i.title),i.description!==t.description&&(e.description=i.description),i.priority!==t.priority&&(e.priority=i.priority),i.category!==t.category&&(e.category=i.category),i.due_date!==t.due_date&&(e.due_date=i.due_date),t.is_completed!=t.is_completed&&(e.is_completed=t.is_completed),s(e)}else s(i)}},children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-600 mb-1",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:i.title,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all ".concat(d.title?"border-red-300":"border-pastel-gray"),placeholder:"What needs to be done?"}),d.title&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:d.title})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:i.description,onChange:u,rows:3,className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",placeholder:"Add details..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-600 mb-1",children:"Priority"}),(0,a.jsxs)("select",{id:"priority",name:"priority",value:i.priority,onChange:u,className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-600 mb-1",children:"Due Date"}),(0,a.jsx)("input",{type:"date",id:"due_date",name:"due_date",value:i.due_date,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all ".concat(d.due_date?"border-red-300":"border-pastel-gray")}),d.due_date&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:d.due_date})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-600 mb-1",children:"Category"}),(0,a.jsx)("input",{type:"text",id:"category",name:"category",value:i.category,onChange:u,className:"w-full px-3 py-2 border border-pastel-gray rounded-lg focus:outline-none focus:ring-2 focus:ring-pastel-blue focus:border-transparent transition-all",placeholder:"Work, Personal, etc."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-pastel-gray rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-gray transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-pastel-blue rounded-lg hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-blue transition-colors",children:o?"Update Todo":"Create Todo"})]})]})]})})})},p=e=>{let{filterStatus:t="all",filterPriority:s="all",filterCategory:r="all",filterDueDate:o="all",searchTerm:i=""}=e,[n,d]=(0,l.useState)([]),[p,x]=(0,l.useState)(!0),[g,h]=(0,l.useState)(null),[f,y]=(0,l.useState)(!1),[b,j]=(0,l.useState)(null),[v,N]=(0,l.useState)(0);(0,l.useEffect)(()=>{(async()=>{try{x(!0),h(null);let e=await c.getTodos(i,"completed"===t||"pending"!==t&&void 0,"all"===s?void 0:s,"all"===r?void 0:r,"all"===o?void 0:o);d(Array.isArray(e.todos)?e.todos:[])}catch(e){h("Failed to fetch todos"),console.error("Error fetching todos:",e)}finally{x(!1)}})()},[t,s,r,o,i,v]);let w=e=>{d(n.map(t=>t.id===e.id?e:t))},_=e=>{j(e),y(!0)},C=async e=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await c.deleteTodo(e),d(n.filter(t=>t.id!==e))}catch(e){h("Failed to delete todo"),console.error("Error deleting todo:",e)}},k=async e=>{try{if(b){let t=await c.updateTodo(b.id,e);d(n.map(e=>e.id===t.id?t:e))}else{let t=await c.createTodo(e);d([t,...n])}y(!1),j(null)}catch(e){h("Failed to save todo"),console.error("Error saving todo:",e)}};return p?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"text-lg text-gray-600",children:"Loading todos..."})}):g?(0,a.jsx)("div",{className:"bg-pastel-pink rounded-xl p-4 mb-4",children:(0,a.jsx)("div",{className:"text-sm text-red-700",children:g})}):(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Your Todos"}),(0,a.jsx)("button",{onClick:()=>{j(null),y(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-pastel-blue rounded-lg hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-blue transition-colors",children:"Add New Todo"})]}),Array.isArray(n)&&0===n.length?(0,a.jsx)("div",{className:"text-center py-12 bg-pastel-gray rounded-xl",children:(0,a.jsx)("p",{className:"text-gray-600",children:"No todos found. Create your first todo!"})}):Array.isArray(n)?(0,a.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,a.jsx)(u,{todo:e,onToggle:w,onEdit:_,onDelete:C},e.id))}):(0,a.jsx)("div",{className:"text-center py-12 bg-pastel-gray rounded-xl",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Error loading todos"})}),f&&(0,a.jsx)(m,{todo:b,onSubmit:k,onCancel:()=>{y(!1),j(null)}})]})},x=()=>{let{user:e,logout:t}=(0,r.a)(),[s,o]=(0,l.useState)({status:"all",priority:"all",category:"all",dueDate:"all",searchTerm:""}),d=async()=>{await t()};return(0,a.jsx)(i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pastel-gray to-white p-4 md:p-8",children:[(0,a.jsx)("nav",{className:"bg-white rounded-2xl shadow-md p-4 mb-6",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Todo Dashboard"})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"ml-3 relative",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-gray-700 font-medium",children:["Welcome, ",null==e?void 0:e.email]}),(0,a.jsx)("button",{onClick:d,className:"ml-4 px-4 py-2 text-sm font-medium text-white bg-pastel-blue rounded-lg hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pastel-blue transition-colors",children:"Logout"})]})})})]})})}),(0,a.jsx)("main",{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[(0,a.jsx)(n,{onFilterChange:e=>{o(e)}}),(0,a.jsx)(p,{filterStatus:s.status,filterPriority:s.priority,filterCategory:s.category,filterDueDate:s.dueDate,searchTerm:s.searchTerm})]})})})]})})}},1163:function(e,t,s){e.exports=s(3719)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=528)}),_N_E=e.O()}]);