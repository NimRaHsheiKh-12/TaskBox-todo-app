# API Contracts: Full-Stack Todo Application with Authentication

## Authentication Endpoints

### POST /auth/register
**Description**: Register a new user account
**Authentication**: None required

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response (201 Created)**:
```json
{
  "message": "User registered successfully",
  "user": {
    "id": "uuid-string",
    "email": "user@example.com",
    "created_at": "2026-01-03T10:00:00Z"
  }
}
```

**Validation**:
- Email must be valid format
- Password must meet security requirements
- Email must be unique

**Error Responses**:
- 400: Invalid input
- 409: Email already exists

---

### POST /auth/login
**Description**: Authenticate user and return JWT token
**Authentication**: None required

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response (200 OK)**:
```json
{
  "access_token": "jwt-token-string",
  "token_type": "bearer",
  "user": {
    "id": "uuid-string",
    "email": "user@example.com"
  }
}
```

**Validation**:
- Email must exist
- Password must match stored hash

**Error Responses**:
- 400: Invalid input
- 401: Invalid credentials

---

### POST /auth/logout
**Description**: Logout user (client-side token removal)
**Authentication**: JWT required

**Response (200 OK)**:
```json
{
  "message": "Logged out successfully"
}
```

---

### GET /auth/profile
**Description**: Get current user's profile information
**Authentication**: JWT required

**Response (200 OK)**:
```json
{
  "id": "uuid-string",
  "email": "user@example.com",
  "created_at": "2026-01-03T10:00:00Z",
  "updated_at": "2026-01-03T10:00:00Z"
}
```

**Error Responses**:
- 401: Invalid or expired token

---

### POST /auth/token/validate
**Description**: Validate JWT token
**Authentication**: JWT required

**Response (200 OK)**:
```json
{
  "valid": true,
  "user_id": "uuid-string"
}
```

**Error Responses**:
- 401: Invalid or expired token

## Todo Management Endpoints

### GET /todos
**Description**: List todos for the authenticated user
**Authentication**: JWT required

**Query Parameters**:
- `status` (optional): "completed", "incomplete", or "all"
- `priority` (optional): "Low", "Medium", "High"
- `category` (optional): Category name
- `due_date` (optional): "today", "upcoming", "overdue", or specific date
- `search` (optional): Search term for title
- `limit` (optional): Number of results (default: 50)
- `offset` (optional): Offset for pagination (default: 0)

**Response (200 OK)**:
```json
{
  "todos": [
    {
      "id": "uuid-string",
      "user_id": "uuid-string",
      "title": "Todo title",
      "description": "Todo description",
      "is_completed": false,
      "priority": "Medium",
      "category": "Work",
      "due_date": "2026-01-10",
      "created_at": "2026-01-03T10:00:00Z",
      "updated_at": "2026-01-03T10:00:00Z"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

**Error Responses**:
- 401: Invalid or expired token

---

### POST /todos
**Description**: Create a new todo for the authenticated user
**Authentication**: JWT required

**Request**:
```json
{
  "title": "New todo title",
  "description": "Todo description",
  "priority": "Medium",
  "category": "Work",
  "due_date": "2026-01-10"
}
```

**Response (201 Created)**:
```json
{
  "id": "uuid-string",
  "user_id": "uuid-string",
  "title": "New todo title",
  "description": "Todo description",
  "is_completed": false,
  "priority": "Medium",
  "category": "Work",
  "due_date": "2026-01-10",
  "created_at": "2026-01-03T10:00:00Z",
  "updated_at": "2026-01-03T10:00:00Z"
}
```

**Validation**:
- Title is required
- Priority must be one of: "Low", "Medium", "High"

**Error Responses**:
- 400: Invalid input
- 401: Invalid or expired token

---

### GET /todos/{id}
**Description**: Get a specific todo for the authenticated user
**Authentication**: JWT required

**Response (200 OK)**:
```json
{
  "id": "uuid-string",
  "user_id": "uuid-string",
  "title": "Todo title",
  "description": "Todo description",
  "is_completed": false,
  "priority": "Medium",
  "category": "Work",
  "due_date": "2026-01-10",
  "created_at": "2026-01-03T10:00:00Z",
  "updated_at": "2026-01-03T10:00:00Z"
}
```

**Error Responses**:
- 401: Invalid or expired token
- 404: Todo not found or not owned by user

---

### PUT /todos/{id}
**Description**: Update a specific todo for the authenticated user
**Authentication**: JWT required

**Request**:
```json
{
  "title": "Updated todo title",
  "description": "Updated description",
  "is_completed": true,
  "priority": "High",
  "category": "Personal",
  "due_date": "2026-01-15"
}
```

**Response (200 OK)**:
```json
{
  "id": "uuid-string",
  "user_id": "uuid-string",
  "title": "Updated todo title",
  "description": "Updated description",
  "is_completed": true,
  "priority": "High",
  "category": "Personal",
  "due_date": "2026-01-15",
  "created_at": "2026-01-03T10:00:00Z",
  "updated_at": "2026-01-03T11:00:00Z"
}
```

**Error Responses**:
- 400: Invalid input
- 401: Invalid or expired token
- 404: Todo not found or not owned by user

---

### PATCH /todos/{id}/toggle
**Description**: Toggle completion status of a specific todo
**Authentication**: JWT required

**Response (200 OK)**:
```json
{
  "id": "uuid-string",
  "user_id": "uuid-string",
  "title": "Todo title",
  "description": "Todo description",
  "is_completed": true,
  "priority": "Medium",
  "category": "Work",
  "due_date": "2026-01-10",
  "created_at": "2026-01-03T10:00:00Z",
  "updated_at": "2026-01-03T11:00:00Z"
}
```

**Error Responses**:
- 401: Invalid or expired token
- 404: Todo not found or not owned by user

---

### DELETE /todos/{id}
**Description**: Delete a specific todo for the authenticated user
**Authentication**: JWT required

**Response (204 No Content)**:

**Error Responses**:
- 401: Invalid or expired token
- 404: Todo not found or not owned by user

## Error Response Format

All error responses follow this format:

```json
{
  "detail": "Error message explaining the issue"
}
```