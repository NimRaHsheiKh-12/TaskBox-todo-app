# Deployment Guide: Vercel + Railway

## Overview
- **Frontend**: Vercel (Next.js)
- **Backend**: Railway (FastAPI)
- **Database**: PostgreSQL on Railway

---

## Part 1: Prepare Git Repository

### 1. Commit all changes
```bash
cd c:\fullstack TODO\todo_fullstack_app
git add .
git commit -m "Ready for production deployment"
git push origin main
```

Make sure your repository is on GitHub: https://github.com/your-username/your-repo

---

## Part 2: Deploy Backend to Railway

### Step 1: Create Railway Account
1. Go to https://railway.app
2. Sign up with GitHub
3. Create a new project

### Step 2: Configure Backend
Railway will auto-detect it's a Python project and read the Dockerfile.

Environment variables to set in Railway:
```
DATABASE_URL=postgresql://...  (auto-generated by Railway when you add PostgreSQL)
JWT_SECRET_KEY=your-strong-secret-key-here-change-this
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

### Step 3: Add PostgreSQL Database
1. In Railway dashboard, click "Add Service"
2. Select "PostgreSQL"
3. The `DATABASE_URL` will be auto-populated

### Step 4: Get Backend URL
After deployment, Railway gives you a domain like:
```
https://your-backend-xxx.railway.app
```

**Save this URL** - you'll need it for the frontend.

---

## Part 3: Deploy Frontend to Vercel

### Step 1: Create Vercel Account
1. Go to https://vercel.com
2. Sign up with GitHub
3. Import your project

### Step 2: Configure Environment Variables
In Vercel project settings, add:
```
NEXT_PUBLIC_API_URL=https://your-backend-xxx.railway.app
```

This tells your frontend where the backend is running.

### Step 3: Deploy
Vercel will automatically build and deploy when you push to GitHub.

Your frontend will be available at:
```
https://your-project-name.vercel.app
```

---

## Part 4: Verify Deployment

### Test Backend Health
```bash
curl https://your-backend-xxx.railway.app/health
```
Should return 200 status.

### Test Frontend
Open https://your-project-name.vercel.app in browser.

### Test Chat API
Try sending a chat message - should reach your Railway backend.

---

## Part 5: Update CORS if Needed

If you get CORS errors, update backend/src/main.py:
```python
origins = [
    "https://your-project-name.vercel.app",
]
```

---

## Important Notes

1. **Environment Variables**: Never commit secrets. Use Vercel/Railway dashboards.
2. **Database**: Railway PostgreSQL is auto-provisioned. No setup needed.
3. **Scaling**: Both Vercel and Railway scale automatically.
4. **Monitoring**: Use Railway and Vercel dashboards to monitor logs and performance.

---

## Troubleshooting

**Frontend can't reach backend?**
- Check `NEXT_PUBLIC_API_URL` in Vercel
- Verify CORS in backend/src/main.py

**Backend crashes?**
- Check Railway logs for errors
- Ensure `DATABASE_URL` is set
- Check Python dependencies in requirements.txt

**Database connection fails?**
- Wait 30 seconds after adding PostgreSQL
- Verify `DATABASE_URL` is populated
- Check if database service is running in Railway

