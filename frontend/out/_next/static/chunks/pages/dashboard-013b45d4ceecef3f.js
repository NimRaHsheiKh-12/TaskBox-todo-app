(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return o(3014)}])},3014:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return g}});var s=o(5893),i=o(7294),r=o(8518),a=o(1163),d=e=>{let{children:t}=e,{loading:o,isAuthenticated:d}=(0,r.a)(),l=(0,a.useRouter)();return((0,i.useEffect)(()=>{o||d||l.push("/login")},[d,o,l]),o)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Loading..."})}):d?(0,s.jsx)(s.Fragment,{children:t}):null},l=e=>{let{onFilterChange:t}=e,[o,r]=(0,i.useState)("all"),[a,d]=(0,i.useState)("all"),[l,n]=(0,i.useState)(""),[c,u]=(0,i.useState)("all"),[m,x]=(0,i.useState)("");return(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,s.jsx)("input",{type:"text",id:"search",value:m,onChange:e=>x(e.target.value),placeholder:"Search by title...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{id:"status",value:o,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,s.jsxs)("select",{id:"priority",value:a,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"all",children:"All Priorities"}),(0,s.jsx)("option",{value:"Low",children:"Low"}),(0,s.jsx)("option",{value:"Medium",children:"Medium"}),(0,s.jsx)("option",{value:"High",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsx)("input",{type:"text",id:"category",value:l,onChange:e=>n(e.target.value),placeholder:"Filter by category...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,s.jsxs)("select",{id:"dueDate",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"all",children:"All Dates"}),(0,s.jsx)("option",{value:"today",children:"Today"}),(0,s.jsx)("option",{value:"upcoming",children:"Upcoming"}),(0,s.jsx)("option",{value:"overdue",children:"Overdue"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{t({status:o,priority:a,category:""===l.trim()?"all":l,dueDate:c,searchTerm:m.trim()})},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Apply Filters"}),(0,s.jsx)("button",{onClick:()=>{r("all"),d("all"),n(""),u("all"),x(""),t({status:"all",priority:"all",category:"all",dueDate:"all",searchTerm:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Reset Filters"})]})]})};let n=o(7066).Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("access_token"),window.location.href="/login"),Promise.reject(e)});let c={getTodos:async function(e,t,o,s,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=new URLSearchParams;return e&&d.append("search",e),void 0!==t&&d.append("status",t.toString()),o&&d.append("priority",o),s&&d.append("category",s),i&&d.append("due_date",i),d.append("limit",r.toString()),d.append("offset",a.toString()),(await n.get("/todos?".concat(d.toString()))).data},createTodo:async e=>(await n.post("/todos",e)).data,getTodoById:async e=>(await n.get("/todos/".concat(e))).data,updateTodo:async(e,t)=>(await n.put("/todos/".concat(e),t)).data,toggleTodoCompletion:async e=>(await n.patch("/todos/".concat(e,"/toggle"))).data,deleteTodo:async e=>{await n.delete("/todos/".concat(e))}};var u=e=>{let{todo:t,onToggle:o,onEdit:i,onDelete:r}=e,a=async()=>{try{let e=await c.toggleTodoCompletion(t.id);o(e)}catch(e){console.error("Error toggling todo:",e)}},d={Low:"text-green-700 bg-green-100",Medium:"text-yellow-700 bg-yellow-100",High:"text-red-700 bg-red-100"}[t.priority];return(0,s.jsx)("div",{className:"p-4 mb-3 rounded-lg border ".concat(t.is_completed?"bg-green-50 border-green-200":"bg-white border-gray-200"," shadow-sm transition-all duration-200 hover:shadow-md"),children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.is_completed,onChange:a,className:"mt-1 h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0"}),(0,s.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-medium truncate ".concat(t.is_completed?"line-through text-gray-500":"text-gray-900"),children:t.title}),(0,s.jsxs)("div",{className:"flex space-x-3 ml-2",children:[(0,s.jsx)("button",{onClick:()=>{i(t)},className:"text-sm font-medium text-indigo-600 hover:text-indigo-800 transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>{r(t.id)},className:"text-sm font-medium text-red-600 hover:text-red-800 transition-colors",children:"Delete"})]})]}),t.description&&(0,s.jsx)("p",{className:"mt-1 text-sm ".concat(t.is_completed?"line-through text-gray-500":"text-gray-600"," break-words"),children:t.description}),(0,s.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(d),children:t.priority}),t.category&&(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-gray-700 bg-gray-100",children:t.category}),t.due_date&&(0,s.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-gray-700 bg-gray-100",children:["Due: ",new Date(t.due_date).toLocaleDateString()]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-gray-500 bg-gray-100",children:new Date(t.created_at).toLocaleDateString()})]})]})]})})},m=e=>{let{todo:t,onSubmit:o,onCancel:r}=e,a=!!t,[d,l]=(0,i.useState)({title:"",description:"",priority:"Medium",category:"",due_date:""}),[n,c]=(0,i.useState)({});(0,i.useEffect)(()=>{a&&t?l({title:t.title,description:t.description||"",priority:t.priority,category:t.category||"",due_date:t.due_date||""}):l({title:"",description:"",priority:"Medium",category:"",due_date:""})},[a,t]);let u=e=>{let{name:t,value:o}=e.target;l({...d,[t]:o}),n[t]&&c({...n,[t]:""})},m=()=>{let e={};return d.title.trim()||(e.title="Title is required"),d.due_date&&isNaN(Date.parse(d.due_date))&&(e.due_date="Invalid date format. Use YYYY-MM-DD"),c(e),0===Object.keys(e).length};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a?"Edit Todo":"Create New Todo"}),(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),m()){if(a&&t){let e={};d.title!==t.title&&(e.title=d.title),d.description!==t.description&&(e.description=d.description),d.priority!==t.priority&&(e.priority=d.priority),d.category!==t.category&&(e.category=d.category),d.due_date!==t.due_date&&(e.due_date=d.due_date),t.is_completed!=t.is_completed&&(e.is_completed=t.is_completed),o(e)}else o(d)}},children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,s.jsx)("input",{type:"text",id:"title",name:"title",value:d.title,onChange:u,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ".concat(n.title?"border-red-500":"border-gray-300"),placeholder:"What needs to be done?"}),n.title&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.title})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:d.description,onChange:u,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add details..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,s.jsxs)("select",{id:"priority",name:"priority",value:d.priority,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,s.jsx)("option",{value:"Low",children:"Low"}),(0,s.jsx)("option",{value:"Medium",children:"Medium"}),(0,s.jsx)("option",{value:"High",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,s.jsx)("input",{type:"date",id:"due_date",name:"due_date",value:d.due_date,onChange:u,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ".concat(n.due_date?"border-red-500":"border-gray-300")}),n.due_date&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.due_date})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsx)("input",{type:"text",id:"category",name:"category",value:d.category,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Work, Personal, etc."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:a?"Update Todo":"Create Todo"})]})]})]})})})},x=e=>{let{filterStatus:t="all",filterPriority:o="all",filterCategory:r="all",filterDueDate:a="all",searchTerm:d=""}=e,[l,n]=(0,i.useState)([]),[x,g]=(0,i.useState)(!0),[h,p]=(0,i.useState)(null),[f,y]=(0,i.useState)(!1),[b,j]=(0,i.useState)(null),[v,N]=(0,i.useState)(0);(0,i.useEffect)(()=>{(async()=>{try{g(!0),p(null);let e=await c.getTodos(d,"completed"===t||"pending"!==t&&void 0,"all"===o?void 0:o,"all"===r?void 0:r,"all"===a?void 0:a);n(e.todos)}catch(e){p("Failed to fetch todos"),console.error("Error fetching todos:",e)}finally{g(!1)}})()},[t,o,r,a,d,v]);let w=e=>{n(l.map(t=>t.id===e.id?e:t))},_=e=>{j(e),y(!0)},C=async e=>{if(window.confirm("Are you sure you want to delete this todo?"))try{await c.deleteTodo(e),n(l.filter(t=>t.id!==e))}catch(e){p("Failed to delete todo"),console.error("Error deleting todo:",e)}},T=async e=>{try{if(b){let t=await c.updateTodo(b.id,e);n(l.map(e=>e.id===t.id?t:e))}else{let t=await c.createTodo(e);n([t,...l])}y(!1),j(null)}catch(e){p("Failed to save todo"),console.error("Error saving todo:",e)}};return x?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"text-lg",children:"Loading todos..."})}):h?(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsx)("div",{className:"text-sm text-red-700",children:h})}):(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Todos"}),(0,s.jsx)("button",{onClick:()=>{j(null),y(!0)},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add New Todo"})]}),0===l.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No todos found. Create your first todo!"})}):(0,s.jsx)("div",{children:l.map(e=>(0,s.jsx)(u,{todo:e,onToggle:w,onEdit:_,onDelete:C},e.id))}),f&&(0,s.jsx)(m,{todo:b,onSubmit:T,onCancel:()=>{y(!1),j(null)}})]})},g=()=>{let{user:e,logout:t}=(0,r.a)(),[o,a]=(0,i.useState)({status:"all",priority:"all",category:"all",dueDate:"all",searchTerm:""}),n=async()=>{await t()};return(0,s.jsx)(d,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("nav",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Todo Dashboard"})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{className:"ml-3 relative",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-gray-700",children:["Welcome, ",null==e?void 0:e.email]}),(0,s.jsx)("button",{onClick:n,className:"ml-4 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Logout"})]})})})]})})}),(0,s.jsx)("main",{children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsx)(l,{onFilterChange:e=>{a(e)}}),(0,s.jsx)(x,{filterStatus:o.status,filterPriority:o.priority,filterCategory:o.category,filterDueDate:o.dueDate,searchTerm:o.searchTerm})]})})})]})})}},1163:function(e,t,o){e.exports=o(3719)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=528)}),_N_E=e.O()}]);